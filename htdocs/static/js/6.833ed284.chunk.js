(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[6],{501:function(e,a){},614:function(e,a){},615:function(e,a){},617:function(e,a,t){},641:function(e,a,t){"use strict";t.r(a);var n=t(135),r=t(14),o=t(15),c=t(18),s=t(17),l=t(0),i=t.n(l),u=t(38),d=t(71),b=t(625),m=t(626),p=t(639),f=t(640),k=t(642),h=t(643),g=t(238),_=t(634),y=t(644),v=t(609),w=t.n(v),C=t(184),E=t(621),D=t(155),N=t(39),S=t(129),O=(t(451),t(452),t(617),t(130)),j=t(44);function x(e){var a=D.a.pt,t=function(e){var a="";switch(e){case"Numero do Caso":a="case_number";break;case"Provincia":a="provincia";break;case"Distrito":a="distrito";break;case"Localidade":a="localidade";break;case"Sector":a="sector";break;case"Resposta":a="response";break;case"Outra categoria":a="othercategory";break;case"M\xeas":a="month";break;case"Tipo de Caso":a="category";break;case"Subcategoria":a="subcategory";break;case"Problema de Subcategoria":a="subcategory_issue";break;case"Vulnerabilidade":a="vulnerability";break;case"Notas da Chamada":a="call_notes";break;case"Prioridade de Caso":a="case_priority";break;case"Quem est\xe1 a comunicar?":a="contact_group";break;case"Consentimento para coletar informa\xe7\xf5es pessoais":a="consent_pi";break;case"Consentimento para compartilhar com parceiro":a="consent_share_pi";break;case"Nome Completo":a="fullname";break;case"Contacto":a="contact";break;case"G\xeanero":a="gender";break;case"Idade":a="age_group";break;case"Comunidade":a="community";break;case"Ponto de Distribui\xe7\xe3o":a="distribution_point";break;case"Modalidade de Transferencia":a="transfermod";break;case"Acomoda\xe7\xe3o ou Centro de Reassentamento":a="location_type";break;case"Nome de Reassentamento":a="ressetlement_name";break;case"Solu\xe7\xe3o da Chamada":a="call_solution";break;case"Est\xe1 encerrado?":a="is_closed";break;case"Como est\xe1 a contactar-nos?":a="means_of_communication";break;case"Como teve conhecimento sobre o mecanismo de reclama\xe7\xe3o e feedback?":a="how_knows_lv";break;case"Como gostaria de ser contactado?":a="how_callback";break;case"Como \xe9 que voc\xea sente que seu assunto foi tratado durante esta chamada?":a="call_feedback";break;case"Liga\xe7\xe3o de volta":a="callback_required";break;case"Outro contacto":a="other_contact";break;case"Chamador n\xe3o encontrado para feedback":a="unavailable_contact";break;case"Criado por":a="created_by__label";break;case"Case Number":a="case_number";break;case"Province":a="provincia";break;case"District":a="distrito";break;case"Locality":a="localidade";break;case"Response":a="response";break;case"Other category":a="othercategory";break;case"Month":a="month";break;case"Case category":a="category";break;case"Sub-category":a="subcategory";break;case"Sub-category issue":a="subcategory_issue";break;case"Vulnerability":a="vulnerability";break;case"Call Notes":a="call_notes";break;case"Who is contacting":a="contact_group";break;case"Consent to Collect Personal Information":a="consent_pi";break;case"Consent to share Personal Information":a="consent_share_pi";break;case"Full Name":a="fullname";break;case"Contact":a="contact";break;case"Gender":a="gender";break;case"Age":a="age_group";break;case"Community":a="community";break;case"Distribution Point":a="distribution_point";break;case"Transfer modality":a="transfermod";break;case"Accommodation or resettlement centre":a="location_type";break;case"Resettlement name":a="ressetlement_name";break;case"Call Solution":a="call_solution";break;case"Case closed?":a="is_closed";break;case"How did they contact us?":a="means_of_communication";break;case"How did you hear about linha verde?":a="how_knows_lv";break;case"How would you like to be contacted?":a="how_callback";break;case"How do you feel you issue was managed during this call?":a="call_feedback";break;case"Callback Required":a="callback_required";break;case"Other number":a="other_contact";break;case"Created by":a="created_by__label";break;default:a=e}return a},n=Object(E.a)({accept:".xlsx, .xls, .csv",onDrop:function(n){var r=new FileReader;r.onload=function(){var o=r.result,c=w.a.read(o,{type:"binary"});c.SheetNames.forEach((function(r){var o=w.a.utils.sheet_to_row_object_array(c.Sheets[r]);e.getTableData(o.map((function(n){return function(n){var r=Object.entries(n),o=O.a.pages.lvform.form,c={};return r.forEach((function(r){if("gender"!==t(r[0]))if("provincia"===t(r[0])||"distrito"===t(r[0])||"localidade"===t(r[0])){var s=o.filter((function(e){return e.name===t(r[0])}))[0];if(s&&"string"===s.type&&s["wq:ForeignKey"]){var l;if("Null"===r[1])return;var i=null===(l=e.app_reducer.dropdowns[s["wq:ForeignKey"]])||void 0===l?void 0:l.filter((function(e){return e.label===r[1]}));(null===i||void 0===i?void 0:i.length)>0?c["".concat(t(r[0]),"_id")]=i[0].id:c["".concat(t(r[0]),"_id")]="",c["".concat(t(r[0]))]=r[1]}}else{var u=Object.entries(a).filter((function(e){return e[1]===r[1]}));if(u.length>0){var d=o.filter((function(e){return e.name===t(r[0])}))[0];if(d&&"string"===d.type&&d["wq:ForeignKey"]){var b,m=null===(b=e.app_reducer.dropdowns[d["wq:ForeignKey"]])||void 0===b?void 0:b.filter((function(e){return e.label===u[0][0]}));m.length>0?c["".concat(t(r[0]),"_id")]=m[0].id:c["".concat(t(r[0]),"_id")]="",c["".concat(t(r[0]))]=u[0][0]}if("Null"===u[0][0])return c[t(r[0])]="",void(c["".concat(t(r[0]),"_id")]="");d&&"select one"===d.type&&!d.has_boolean_options&&(c["".concat(t(r[0]))]=u[0][0]),d&&d.has_boolean_options&&(c["".concat(t(r[0]))]="Yes"===u[0][0])}else{c[t(r[0])]=n[r[0]];var p=o.filter((function(e){return e.name===t(r[0])}))[0];if(p&&"string"===p.type&&p["wq:ForeignKey"]){var f,k=null===(f=e.app_reducer.dropdowns[p["wq:ForeignKey"]])||void 0===f?void 0:f.filter((function(e){return e.label===r[1]}));(null===k||void 0===k?void 0:k.length)>0?c["".concat(t(r[0]),"_id")]=k[0].id:c["".concat(t(r[0]),"_id")]="",c["".concat(t(r[0]))]=n[r[0]]}if("Null"===n[r[0]]){if(p){if("int"===(null===p||void 0===p?void 0:p.type))return void(c[t(r[0])]=0);p["wq:ForeignKey"]&&(c["".concat(t(r[0]),"_id")]="")}return void(c[t(r[0])]="")}p&&"select one"===p.type&&!p.has_boolean_options&&(c["".concat(t(r[0]))]=n[r[0]]),p&&p.has_boolean_options&&(c["".concat(t(r[0]))]="Yes"===n[r[0]])}}})),c}(n)})),n[0].name)}))},n.length?r.readAsBinaryString(n[0]):d.c.error("You can only upload .xlsx, .xls, .csv Files!")}}),r=n.getRootProps,o=n.getInputProps;return i.a.createElement("section",{className:"pb-1"},i.a.createElement("div",r({className:"dropzone py-3 flex-column"}),i.a.createElement("input",o()),i.a.createElement(C.a,{className:"text-light",size:50}),i.a.createElement("h4",{className:"mb-0 mt-2"},"Drop Excel File or Browse")))}var F=function(e){Object(c.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).translate=e.context.translate,e.state={tableData:[],filteredData:[],value:"",name:"",uploading:!1},e.getTableData=function(a,t){e.setState({tableData:a,name:t})},e.handleFilter=function(a){var t=e.state.tableData,n=[],r=a.target.value;if(e.setState({value:r}),!r.length)return null;n=t.filter((function(e){var a=Object.keys(e),t=a.filter((function(a){return e[a].toString().toLowerCase().startsWith(r.toLowerCase())})),n=a.filter((function(a){return e[a].toString().toLowerCase().includes(r.toLowerCase())}));return t.length?e[t]:!t&&n.length?e[n]:null})),e.setState({value:r,filteredData:n})},e.handleSubmit=function(){var a=e.props.state.auth.login.userOauth;e.setState({uploading:!0}),(new FormData).append("data",JSON.stringify(e.state.tableData)),N.a.post("lvforms/0/import_cases.json/",e.state.tableData,{headers:{Authorization:"Bearer ".concat(a.access_token),"Content-type":"application/json"}}).then((function(a){a.data;e.setState({uploading:!1}),e.notifySuccessBounce("")})).catch((function(a){e.setState({uploading:!1}),console.error(a),e.notifyErrorBounce("Failed to save Object.")}))},e.notifySuccessBounce=function(){return d.c.success(e.translate("Transaction completed successfuly!"),{transition:d.a})},e.notifyErrorBounce=function(a){return d.c.error(e.translate(a),{transition:d.a})},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.requestDropodowns()}},{key:"render",value:function(){var e=this,a=this.state.tableData.length?this.state.tableData.map((function(e,a){return 0===a?Object(n.a)(Object.keys(e)):null})):[],t=this.state.value.length?this.state.filteredData:this.state.tableData.length&&!this.state.value.length?this.state.tableData:null,r=null!==t&&t.length?t.map((function(a,t){var n=Object.keys(a).map((function(t,n){return i.a.createElement("td",{key:n},e.translate(a[t]))}));return i.a.createElement("tr",{key:t},n)})):i.a.createElement("tr",null),o=a.length?a[0].map((function(e,a){return i.a.createElement("th",{key:a},e)})):null;return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{className:"import-component"},i.a.createElement(m.a,{sm:"12"},i.a.createElement(p.a,{className:"rounded-0"},i.a.createElement(f.a,{className:"rounded-0"},i.a.createElement(b.a,null,i.a.createElement(m.a,{sm:"12"},i.a.createElement(x,Object.assign({getTableData:this.getTableData},this.props))))))),this.state.tableData.length?i.a.createElement(m.a,{sm:"12"},i.a.createElement(p.a,{className:"rounded-0"},i.a.createElement(k.a,{className:"justify-content-between flex-wrap rounded-0"},i.a.createElement(h.a,null,this.state.name),i.a.createElement("div",{className:"flex-wrap"},i.a.createElement(g.a.Ripple,{onClick:function(){return e.handleSubmit()},className:"rounded-0 mr-1",color:"primary"},this.state.uploading?i.a.createElement(_.a,{type:"grow",size:"sm",className:"mr-1"}):null,this.translate("Upload Data")))),i.a.createElement(f.a,{className:"rounded-0"},i.a.createElement(y.a,{className:"table-hover-animation",responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,o)),i.a.createElement("tbody",null,r))))):null,i.a.createElement(d.b,null)))}}]),t}(i.a.Component);F.contextType=j.a,a.default=Object(u.b)((function(e){return{state:e,app_reducer:e.app.app_reducer}}),{requestDropodowns:S.b})(F)}}]);
//# sourceMappingURL=6.833ed284.chunk.js.map