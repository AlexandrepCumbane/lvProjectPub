{"version":3,"sources":["views/import/Import.js"],"names":["Uploader","props","Keys","PT","pt","handleMapKey","key","mappedKey","useDropzone","accept","onDrop","acceptedFiles","reader","FileReader","onload","fileData","result","wb","XLSX","read","type","SheetNames","forEach","sheetName","rowObj","utils","sheet_to_row_object_array","Sheets","getTableData","map","item","entries","Object","form","config","pages","lvform","kObject","field","filter","name","val","app_reducer","dropdowns","label","length","id","ks","has_boolean_options","mappItemProps","readAsBinaryString","toast","error","getRootProps","getInputProps","className","size","Import","translate","context","state","tableData","filteredData","value","uploading","arr","setState","handleFilter","e","data","target","col","keys","startsWithCondition","toString","toLowerCase","startsWith","includesCondition","includes","handleSubmit","userOauth","auth","login","FormData","append","JSON","stringify","axios","post","headers","Authorization","access_token","then","notifySuccessBounce","catch","console","notifyErrorBounce","success","transition","Bounce","this","requestDropodowns","headArr","index","dataArr","renderTableBody","renderTd","renderTableHead","head","Fragment","sm","Ripple","onClick","color","responsive","React","Component","contextType","IntlContext","connect","app"],"mappings":"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","file":"static/js/6.833ed284.chunk.js","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Bounce } from \"react-toastify\";\nimport {\n  Row,\n  Col,\n  Card,\n  CardBody,\n  Table,\n  CardHeader,\n  CardTitle,\n  Button,\n  Spinner,\n} from \"reactstrap\";\nimport XLSX from \"xlsx\";\nimport { DownloadCloud } from \"react-feather\";\nimport { useDropzone } from \"react-dropzone\";\nimport { toast, ToastContainer } from \"react-toastify\";\n\nimport PT from \"../../i18n/messages/pt-PT\";\n// import EN from \"../../i18n/messages/en-US\";\n\nimport { axios } from \"../../redux/api\";\nimport { requestDropodowns } from \"../../redux/actions/app/actions\";\n\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"../../assets/scss/plugins/extensions/toastr.scss\";\nimport \"../../assets/scss/plugins/extensions/dropzone.scss\";\nimport config from \"../../data/config\";\nimport { IntlContext } from \"../../i18n\";\n\nfunction Uploader(props) {\n  const Keys = PT.pt;\n\n  const handleMapKey = (key) => {\n    let mappedKey = \"\";\n\n    switch (key) {\n      case \"Numero do Caso\":\n        mappedKey = \"case_number\";\n        break;\n\n      case \"Provincia\":\n        mappedKey = \"provincia\";\n        break;\n\n      case \"Distrito\":\n        mappedKey = \"distrito\";\n        break;\n\n      case \"Localidade\":\n        mappedKey = \"localidade\";\n        break;\n\n      case \"Sector\":\n        mappedKey = \"sector\";\n        break;\n\n      case \"Resposta\":\n        mappedKey = \"response\";\n        break;\n\n      case \"Outra categoria\":\n        mappedKey = \"othercategory\";\n        break;\n\n      case \"Mês\":\n        mappedKey = \"month\";\n        break;\n\n      case \"Tipo de Caso\":\n        mappedKey = \"category\";\n        break;\n\n      case \"Subcategoria\":\n        mappedKey = \"subcategory\";\n        break;\n\n      case \"Problema de Subcategoria\":\n        mappedKey = \"subcategory_issue\";\n        break;\n\n      case \"Vulnerabilidade\":\n        mappedKey = \"vulnerability\";\n        break;\n\n      case \"Notas da Chamada\":\n        mappedKey = \"call_notes\";\n        break;\n\n      case \"Prioridade de Caso\":\n        mappedKey = \"case_priority\";\n        break;\n\n      case \"Quem está a comunicar?\":\n        mappedKey = \"contact_group\";\n        break;\n\n      case \"Consentimento para coletar informações pessoais\":\n        mappedKey = \"consent_pi\";\n        break;\n\n      case \"Consentimento para compartilhar com parceiro\":\n        mappedKey = \"consent_share_pi\";\n        break;\n\n      case \"Nome Completo\":\n        mappedKey = \"fullname\";\n        break;\n\n      case \"Contacto\":\n        mappedKey = \"contact\";\n        break;\n\n      case \"Gênero\":\n        mappedKey = \"gender\";\n        break;\n\n      case \"Idade\":\n        mappedKey = \"age_group\";\n        break;\n\n      case \"Comunidade\":\n        mappedKey = \"community\";\n        break;\n\n      case \"Ponto de Distribuição\":\n        mappedKey = \"distribution_point\";\n        break;\n\n      case \"Modalidade de Transferencia\":\n        mappedKey = \"transfermod\";\n        break;\n\n      case \"Acomodação ou Centro de Reassentamento\":\n        mappedKey = \"location_type\";\n        break;\n\n      case \"Nome de Reassentamento\":\n        mappedKey = \"ressetlement_name\";\n        break;\n\n      case \"Solução da Chamada\":\n        mappedKey = \"call_solution\";\n        break;\n\n      case \"Está encerrado?\":\n        mappedKey = \"is_closed\";\n        break;\n\n      case \"Como está a contactar-nos?\":\n        mappedKey = \"means_of_communication\";\n        break;\n\n      case \"Como teve conhecimento sobre o mecanismo de reclamação e feedback?\":\n        mappedKey = \"how_knows_lv\";\n        break;\n\n      case \"Como gostaria de ser contactado?\":\n        mappedKey = \"how_callback\";\n        break;\n\n      case \"Como é que você sente que seu assunto foi tratado durante esta chamada?\":\n        mappedKey = \"call_feedback\";\n        break;\n\n      case \"Ligação de volta\":\n        mappedKey = \"callback_required\";\n        break;\n\n      case \"Outro contacto\":\n        mappedKey = \"other_contact\";\n        break;\n\n      case \"Chamador não encontrado para feedback\":\n        mappedKey = \"unavailable_contact\";\n        break;\n\n      case \"Criado por\":\n        mappedKey = \"created_by__label\";\n        break;\n\n      /**\n       * English Fields\n       */\n      case \"Case Number\":\n        mappedKey = \"case_number\";\n        break;\n\n      case \"Province\":\n        mappedKey = \"provincia\";\n        break;\n\n      case \"District\":\n        mappedKey = \"distrito\";\n        break;\n\n      case \"Locality\":\n        mappedKey = \"localidade\";\n        break;\n\n      case \"Response\":\n        mappedKey = \"response\";\n        break;\n\n      case \"Other category\":\n        mappedKey = \"othercategory\";\n        break;\n\n      case \"Month\":\n        mappedKey = \"month\";\n        break;\n\n      case \"Case category\":\n        mappedKey = \"category\";\n        break;\n\n      case \"Sub-category\":\n        mappedKey = \"subcategory\";\n        break;\n\n      case \"Sub-category issue\":\n        mappedKey = \"subcategory_issue\";\n        break;\n\n      case \"Vulnerability\":\n        mappedKey = \"vulnerability\";\n        break;\n\n      case \"Call Notes\":\n        mappedKey = \"call_notes\";\n        break;\n\n      case \"Who is contacting\":\n        mappedKey = \"contact_group\";\n        break;\n\n      case \"Consent to Collect Personal Information\":\n        mappedKey = \"consent_pi\";\n        break;\n\n      case \"Consent to share Personal Information\":\n        mappedKey = \"consent_share_pi\";\n        break;\n\n      case \"Full Name\":\n        mappedKey = \"fullname\";\n        break;\n\n      case \"Contact\":\n        mappedKey = \"contact\";\n        break;\n\n      case \"Gender\":\n        mappedKey = \"gender\";\n        break;\n\n      case \"Age\":\n        mappedKey = \"age_group\";\n        break;\n\n      case \"Community\":\n        mappedKey = \"community\";\n        break;\n\n      case \"Distribution Point\":\n        mappedKey = \"distribution_point\";\n        break;\n\n      case \"Transfer modality\":\n        mappedKey = \"transfermod\";\n        break;\n\n      case \"Accommodation or resettlement centre\":\n        mappedKey = \"location_type\";\n        break;\n\n      case \"Resettlement name\":\n        mappedKey = \"ressetlement_name\";\n        break;\n\n      case \"Call Solution\":\n        mappedKey = \"call_solution\";\n        break;\n\n      case \"Case closed?\":\n        mappedKey = \"is_closed\";\n        break;\n\n      case \"How did they contact us?\":\n        mappedKey = \"means_of_communication\";\n        break;\n\n      case \"How did you hear about linha verde?\":\n        mappedKey = \"how_knows_lv\";\n        break;\n\n      case \"How would you like to be contacted?\":\n        mappedKey = \"how_callback\";\n        break;\n\n      case \"How do you feel you issue was managed during this call?\":\n        mappedKey = \"call_feedback\";\n        break;\n\n      case \"Callback Required\":\n        mappedKey = \"callback_required\";\n        break;\n\n      case \"Other number\":\n        mappedKey = \"other_contact\";\n        break;\n\n      case \"Created by\":\n        mappedKey = \"created_by__label\";\n        break;\n\n      default:\n        mappedKey = key;\n    }\n\n    return mappedKey;\n  };\n\n  /**\n   * Receives a uploaded single row and match keys to the API required specifications (Post Payload)\n   *\n   * @param {*} item\n   * @returns\n   */\n  const mappItemProps = (item) => {\n    const entries = Object.entries(item); // Gets item object as bi-dimensional array\n\n    const { form } = config.pages.lvform;\n\n    let kObject = {};\n\n    entries.forEach((key) => {\n      if (handleMapKey(key[0]) === \"gender\") return;\n\n      // Specific known keys matching\n      if (\n        handleMapKey(key[0]) === \"provincia\" ||\n        handleMapKey(key[0]) === \"distrito\" ||\n        handleMapKey(key[0]) === \"localidade\"\n      ) {\n        const field = form.filter(\n          (item) => item.name === handleMapKey(key[0])\n        )[0];\n\n        if (field && field.type === \"string\" && field[\"wq:ForeignKey\"]) {\n          if (key[1] === \"Null\") return;\n          const val = props.app_reducer.dropdowns[\n            field[\"wq:ForeignKey\"]\n          ]?.filter((item) => item.label === key[1]);\n\n          if (val?.length > 0)\n            kObject[`${handleMapKey(key[0])}_id`] = val[0].id;\n          else kObject[`${handleMapKey(key[0])}_id`] = \"\";\n\n          kObject[`${handleMapKey(key[0])}`] = key[1];\n        }\n      } else {\n        let ks = Object.entries(Keys).filter((item) => item[1] === key[1]);\n\n        if (ks.length > 0) {\n          const field = form.filter(\n            (item) => item.name === handleMapKey(key[0])\n          )[0];\n\n          if (field && field.type === \"string\" && field[\"wq:ForeignKey\"]) {\n            const val = props.app_reducer.dropdowns[\n              field[\"wq:ForeignKey\"]\n            ]?.filter((item) => item.label === ks[0][0]);\n\n            if (val.length > 0)\n              kObject[`${handleMapKey(key[0])}_id`] = val[0].id;\n            else kObject[`${handleMapKey(key[0])}_id`] = \"\";\n\n            kObject[`${handleMapKey(key[0])}`] = ks[0][0];\n          }\n\n          if (ks[0][0] === \"Null\") {\n            kObject[handleMapKey(key[0])] = \"\";\n            kObject[`${handleMapKey(key[0])}_id`] = \"\";\n            return;\n          }\n\n          if (\n            field &&\n            field.type === \"select one\" &&\n            !field.has_boolean_options\n          ) {\n            kObject[`${handleMapKey(key[0])}`] = ks[0][0];\n          }\n\n          if (field && field.has_boolean_options) {\n            kObject[`${handleMapKey(key[0])}`] =\n              ks[0][0] === \"Yes\" ? true : false;\n          }\n        } else {\n          kObject[handleMapKey(key[0])] = item[key[0]];\n\n          const field = form.filter(\n            (item) => item.name === handleMapKey(key[0])\n          )[0];\n          if (field && field.type === \"string\" && field[\"wq:ForeignKey\"]) {\n            const val = props.app_reducer.dropdowns[\n              field[\"wq:ForeignKey\"]\n            ]?.filter((item) => {\n              return item.label === key[1];\n            });\n\n            if (val?.length > 0)\n              kObject[`${handleMapKey(key[0])}_id`] = val[0].id;\n            else kObject[`${handleMapKey(key[0])}_id`] = \"\";\n\n            kObject[`${handleMapKey(key[0])}`] = item[key[0]];\n          }\n\n          if (item[key[0]] === \"Null\") {\n            if (field) {\n              if (field?.type === \"int\") {\n                kObject[handleMapKey(key[0])] = 0;\n                return;\n              }\n              if (field[\"wq:ForeignKey\"])\n                kObject[`${handleMapKey(key[0])}_id`] = \"\";\n            }\n\n            kObject[handleMapKey(key[0])] = \"\";\n\n            return;\n          }\n\n          if (\n            field &&\n            field.type === \"select one\" &&\n            !field.has_boolean_options\n          ) {\n            kObject[`${handleMapKey(key[0])}`] = item[key[0]];\n          }\n\n          if (field && field.has_boolean_options) {\n            kObject[`${handleMapKey(key[0])}`] =\n              item[key[0]] === \"Yes\" ? true : false;\n          }\n        }\n      }\n    });\n\n    return kObject;\n  };\n\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: \".xlsx, .xls, .csv\",\n    onDrop: (acceptedFiles) => {\n      var reader = new FileReader();\n      reader.onload = function () {\n        var fileData = reader.result;\n        var wb = XLSX.read(fileData, { type: \"binary\" });\n        wb.SheetNames.forEach(function (sheetName) {\n          var rowObj = XLSX.utils.sheet_to_row_object_array(\n            wb.Sheets[sheetName]\n          );\n          props.getTableData(\n            rowObj.map((item) => mappItemProps(item)),\n            acceptedFiles[0].name\n          );\n        });\n      };\n      if (acceptedFiles.length) {\n        reader.readAsBinaryString(acceptedFiles[0]);\n      } else {\n        toast.error(\"You can only upload .xlsx, .xls, .csv Files!\");\n      }\n    },\n  });\n  return (\n    <section className=\"pb-1\">\n      <div {...getRootProps({ className: \"dropzone py-3 flex-column\" })}>\n        <input {...getInputProps()} />\n        <DownloadCloud className=\"text-light\" size={50} />\n        <h4 className=\"mb-0 mt-2\">Drop Excel File or Browse</h4>\n      </div>\n    </section>\n  );\n}\n\nclass Import extends React.Component {\n  static contextType = IntlContext;\n  translate = this.context.translate;\n\n  state = {\n    tableData: [],\n    filteredData: [],\n    value: \"\",\n    name: \"\",\n    uploading: false,\n  };\n\n  componentDidMount() {\n    this.props.requestDropodowns();\n  }\n\n  getTableData = (arr, name) => {\n    this.setState({ tableData: arr, name });\n  };\n\n  handleFilter = (e) => {\n    let data = this.state.tableData;\n    let filteredData = [];\n    let value = e.target.value;\n    this.setState({ value });\n\n    if (value.length) {\n      filteredData = data.filter((col) => {\n        let keys = Object.keys(col);\n\n        let startsWithCondition = keys.filter((key) => {\n          return col[key]\n            .toString()\n            .toLowerCase()\n            .startsWith(value.toLowerCase());\n        });\n\n        let includesCondition = keys.filter((key) =>\n          col[key].toString().toLowerCase().includes(value.toLowerCase())\n        );\n\n        if (startsWithCondition.length) return col[startsWithCondition];\n        else if (!startsWithCondition && includesCondition.length)\n          return col[includesCondition];\n        else return null;\n      });\n\n      this.setState({ value, filteredData });\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Submits the form to post request action\n   */\n  handleSubmit = () => {\n    const { userOauth } = this.props.state.auth.login;\n\n    this.setState({ uploading: true });\n    let form = new FormData();\n    form.append(\"data\", JSON.stringify(this.state.tableData));\n    axios\n      .post(`lvforms/0/import_cases.json/`, this.state.tableData, {\n        headers: {\n          Authorization: `Bearer ${userOauth.access_token}`,\n          \"Content-type\": \"application/json\",\n        },\n      })\n      .then(({ data }) => {\n        this.setState({ uploading: false });\n        this.notifySuccessBounce(\"\");\n      })\n      .catch((error) => {\n        this.setState({ uploading: false });\n        console.error(error);\n        this.notifyErrorBounce(\"Failed to save Object.\");\n      });\n  };\n\n  render() {\n    let headArr = this.state.tableData.length\n      ? this.state.tableData.map((col, index) => {\n          if (index === 0) return [...Object.keys(col)];\n          else return null;\n        })\n      : [];\n    let dataArr = this.state.value.length\n      ? this.state.filteredData\n      : this.state.tableData.length && !this.state.value.length\n      ? this.state.tableData\n      : null;\n    let renderTableBody =\n      dataArr !== null && dataArr.length ? (\n        dataArr.map((col, index) => {\n          let keys = Object.keys(col);\n          let renderTd = keys.map((key, index) => (\n            <td key={index}>{this.translate(col[key])}</td>\n          ));\n          return <tr key={index}>{renderTd}</tr>;\n        })\n      ) : (\n        <tr></tr>\n      );\n\n    let renderTableHead = headArr.length\n      ? headArr[0].map((head, index) => {\n          return <th key={index}>{head}</th>;\n        })\n      : null;\n\n    return (\n      <React.Fragment>\n        <Row className=\"import-component\">\n          <Col sm=\"12\">\n            <Card className=\"rounded-0\">\n              <CardBody className=\"rounded-0\">\n                <Row>\n                  <Col sm=\"12\">\n                    <Uploader\n                      getTableData={this.getTableData}\n                      {...this.props}\n                    />\n                  </Col>\n                </Row>\n              </CardBody>\n            </Card>\n          </Col>\n          {this.state.tableData.length ? (\n            <Col sm=\"12\">\n              <Card className=\"rounded-0\">\n                <CardHeader className=\"justify-content-between flex-wrap rounded-0\">\n                  <CardTitle>{this.state.name}</CardTitle>\n\n                  <div className=\"flex-wrap\">\n                    <Button.Ripple\n                      onClick={() => this.handleSubmit()}\n                      className=\"rounded-0 mr-1\"\n                      color=\"primary\"\n                    >\n                      {this.state.uploading ? (\n                        <Spinner type=\"grow\" size=\"sm\" className=\"mr-1\" />\n                      ) : null}\n                      {this.translate(\"Upload Data\")}\n                    </Button.Ripple>\n\n                    {/* <div className=\" rounded-0 filter position-relative has-icon-left\">\n                      <Input\n                        type=\"text\"\n                        value={this.state.value}\n                        onChange={(e) => this.handleFilter(e)}\n                      />\n                      <div className=\"form-control-position\">\n                        <Search size={15} />\n                      </div>\n                    </div> */}\n                  </div>\n                </CardHeader>\n                <CardBody className=\"rounded-0\">\n                  <Table className=\"table-hover-animation\" responsive>\n                    <thead>\n                      <tr>{renderTableHead}</tr>\n                    </thead>\n                    <tbody>{renderTableBody}</tbody>\n                  </Table>\n                </CardBody>\n              </Card>\n            </Col>\n          ) : null}\n          <ToastContainer />\n        </Row>\n      </React.Fragment>\n    );\n  }\n\n  /**\n   * Success alert function - shows an alert with success background\n   * @returns\n   */\n  notifySuccessBounce = () =>\n    toast.success(this.translate(`Transaction completed successfuly!`), {\n      transition: Bounce,\n    });\n\n  /**\n   * Error alert function - shows an alert with danger background\n   * @param {*} error - string message\n   * @returns\n   */\n  notifyErrorBounce = (error) =>\n    toast.error(this.translate(error), {\n      transition: Bounce,\n    });\n}\n\n// export default Import;\n\nfunction mapStateToProps(state) {\n  return {\n    state: state,\n    app_reducer: state.app.app_reducer,\n  };\n}\n\nexport default connect(mapStateToProps, { requestDropodowns })(Import);\n"],"sourceRoot":""}